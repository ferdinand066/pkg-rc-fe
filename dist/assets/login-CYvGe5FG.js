import{d as e,l as s,m as a,Q as t,A as r,i as l,k as i,s as n,o,f as m,a as c,c as d,j as u,L as x}from"./index-DuxHCDsN.js";import{u as h,I as p}from"./InputText-ZWl9SnFl.js";const f=()=>{const{register:f,setValue:j,errors:g,handleLoginEvent:b,handleSubmit:k}=function(){const{register:u,setValue:x,formState:{errors:p},handleSubmit:f}=h(),[j,g]=e(m),[b,k]=e(c),y=s(d),N=a();return{register:u,setValue:x,errors:p,handleLoginEvent:async function(e){if(!j){g(!0);try{const s=b;localStorage.clear(),k(s);const{data:a}=await t.promise(r.login(e),{pending:"Dalam proses login!",error:i(),success:l()}),m={token:a.token,expiresAt:a.expires_in,roleId:a.user.role};n("token",m,a.expiresAt),y(m),o.defaults.headers.common.Authorization=`Bearer ${a.token}`,N("/schedule")}catch(s){}g(!1)}},handleSubmit:f}}();return u.jsx("div",{className:"my-auto w-full",children:u.jsx("div",{className:"w-full flex flex-col sm:justify-center items-center pt-6 sm:pt-0 my-auto",children:u.jsxs("div",{className:"w-full sm:max-w-lg p-5 mx-auto",children:[u.jsx("h2",{className:"mb-12 text-center text-5xl font-extrabold",children:"Selamat datang."}),u.jsxs("form",{onSubmit:k(b),className:"flex flex-col gap-2",children:[u.jsx(p,{label:"Email",type:"email",name:"email",register:f("email",{required:"Email harus diisi"}),setValue:j,placeholder:"Cth: example@gmail.com",errors:g}),u.jsx(p,{label:"Kata sandi",type:"password",name:"password",register:f("password",{required:"Kata sandi harus diisi"}),setValue:j,placeholder:"Kata sandi",errors:g}),u.jsx("div",{className:"mt-6 flex items-center justify-end",children:u.jsxs(x,{to:"/auth/forgot-password",className:"text-sm link link-primary link-hover",children:[" ","Lupa kata sandi?"," "]})}),u.jsx("div",{className:"mt-4",children:u.jsx("button",{type:"submit",className:"btn btn-primary w-full",children:"Masuk"})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsx(x,{to:"/auth/register",className:"text-sm link link-primary",children:"Daftar akun baru"})})]})]})})})};export{f as default};
