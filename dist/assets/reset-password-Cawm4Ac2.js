import{u as e,f as a,Q as s,A as r,h as t,b as i,d as l,w as n,C as o,j as d}from"./index-DpP_SUQ6.js";import{u as m}from"./useQuery-C6faGm9h.js";import{u,I as c}from"./input-text-Ds8sWXwC.js";const p=()=>{const p=l(),{token:f}=n(),[x]=o(),g=x.get("email")??"",{register:h,setValue:w,errors:j,handleResetPasswordEvent:y,handleSubmit:b}=function(l,n){const{register:o,setValue:d,formState:{errors:m},handleSubmit:c,getValues:p}=u({defaultValues:{email:l,token:n}}),[f,x]=e(a);return{register:o,setValue:d,errors:m,handleResetPasswordEvent:async function(e){if(!f){x(!0);try{await s.promise(r.resetPassword(e),{pending:"Waiting to reset password!",error:i(),success:t()})}catch{}finally{x(!1)}}},handleSubmit:c,getValues:p}}(g,f??""),{data:V,status:k}=m({queryKey:["token",f,x.get("email")],queryFn:()=>r.getForgotPasswordTokenValidation(f??"",g),retry:!1,enabled:!!f&&!!g});return"pending"===k?d.jsx(d.Fragment,{}):"error"!==k&&V?d.jsx("div",{className:"my-auto w-full",children:d.jsx("div",{className:"w-full flex flex-col sm:justify-center items-center pt-6 sm:pt-0 my-auto",children:d.jsxs("div",{className:"w-full sm:max-w-lg p-5 mx-auto",children:[d.jsx("h2",{className:"mb-12 text-center text-5xl font-extrabold",children:"Atur ulang password Anda."}),d.jsxs("form",{onSubmit:b(y),className:"flex flex-col gap-2",children:[d.jsx(c,{label:"Email",type:"email",name:"email",register:h("email",{required:"Email harus diisi"}),setValue:w,placeholder:"Cth: example@gmail.com",errors:j}),d.jsx(c,{label:"Kata sandi",type:"password",name:"password",register:h("password",{required:"Kata sandi harus diisi"}),setValue:w,placeholder:"Kata sandi",errors:j}),d.jsx(c,{label:"Konfirmasi kata sandi",type:"password",name:"password_confirmation",register:h("password_confirmation",{required:"Kata sandi harus diisi"}),setValue:w,placeholder:"Kata sandi",errors:j}),d.jsx("div",{className:"mt-4",children:d.jsx("button",{type:"submit",className:"btn btn-primary w-full",children:"Atur Ulang Password Anda"})})]})]})})}):(s.error("Token tidak valid, harap request link ulang."),setTimeout((()=>{p("/auth/forgot-password")}),200),d.jsx(d.Fragment,{}))};export{p as default};
