import{c as e,f as a,Q as s,A as r,i as t,k as i,m as l,x as n,z as o,j as d}from"./index-CELXcd2A.js";import{u as m}from"./useQuery-CypUoy4z.js";import{u,I as c}from"./InputText-Dh-9wUwK.js";const p=()=>{const p=l(),{token:x}=n(),[f,g]=o(),h=f.get("email")??"",{register:w,setValue:j,errors:y,handleResetPasswordEvent:b,handleSubmit:V}=function(l,n){const{register:o,setValue:d,formState:{errors:m},handleSubmit:c,getValues:p}=u({defaultValues:{email:l,token:n}}),[x,f]=e(a);return{register:o,setValue:d,errors:m,handleResetPasswordEvent:async function(e){if(!x){f(!0);try{await s.promise(r.resetPassword(e),{pending:"Waiting to reset password!",error:t(),success:i()}),f(!1)}catch(a){return void f(!1)}}},handleSubmit:c,getValues:p}}(h,x??""),{data:k,status:v}=m({queryKey:["token",x,f.get("email")],queryFn:()=>r.getForgotPasswordTokenValidation(x??"",h),retry:!1,enabled:!!x&&!!h});return"pending"===v?d.jsx(d.Fragment,{}):"error"!==v&&k?d.jsx("div",{className:"my-auto w-full",children:d.jsx("div",{className:"w-full flex flex-col sm:justify-center items-center pt-6 sm:pt-0 my-auto",children:d.jsxs("div",{className:"w-full sm:max-w-lg p-5 mx-auto",children:[d.jsx("h2",{className:"mb-12 text-center text-5xl font-extrabold",children:"Atur ulang password Anda."}),d.jsxs("form",{onSubmit:V(b),className:"flex flex-col gap-2",children:[d.jsx(c,{label:"Email",type:"email",name:"email",register:w("email",{required:"Email harus diisi"}),setValue:j,placeholder:"Cth: example@gmail.com",errors:y}),d.jsx(c,{label:"Kata sandi",type:"password",name:"password",register:w("password",{required:"Kata sandi harus diisi"}),setValue:j,placeholder:"Kata sandi",errors:y}),d.jsx(c,{label:"Konfirmasi kata sandi",type:"password",name:"password_confirmation",register:w("password_confirmation",{required:"Kata sandi harus diisi"}),setValue:j,placeholder:"Kata sandi",errors:y}),d.jsx("div",{className:"mt-4",children:d.jsx("button",{type:"submit",className:"btn btn-primary w-full",children:"Atur Ulang Password Anda"})})]})]})})}):(s.error("Token tidak valid, harap request link ulang."),setTimeout((()=>{p("/auth/forgot-password")}),200),d.jsx(d.Fragment,{}))};export{p as default};
